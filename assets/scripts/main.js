"use strict";var APP=window.APP=window.APP||{};APP.sidebar=function(){return{init:function(){console.log("APP.sidebar")}}}();var APP=window.APP=window.APP||{};APP.dataTable=function(){function o(o,r,n){var a="object"!=typeof o?JSON.parse(o):o,t="";if(t+=r+"\r\n\n",n){var i="";for(var e in a[0])i+=e+",";i=i.slice(0,-1),t+=i+"\r\n"}for(var d=0;d<a.length;d++){var i="";for(var e in a[d])i+='"'+a[d][e]+'",';i.slice(0,i.length-1),t+=i+"\r\n"}if(""==t)return void alert("Invalid data");var l="";l+=r.replace(/ /g,"_");var c="data:text/csv;charset=utf-8,"+escape(t),s=document.createElement("a");s.href=c,s.style="visibility:hidden",s.download=l+".csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)}var r=function(){$(".export-csv").click(function(r){$.ajax({type:"GET",url:"assets/scripts/MOCK_DATA.json",dataType:"json",success:function(r,n){o(r._1,"Coke drinkers report",!0)}}),r.preventDefault()})};return{init:function(){console.log("APP.dataTable"),r()}}}();var APP=window.APP=window.APP||{};APP.weekChart=function(){var o,r,n=function(o,n){r.data.datasets[n].data.push(o),r.update()},a=function(o){r.data.labels.push(o),r.update()},t=function(){function n(o,r,n,a){o=(o+"").replace(",","").replace(" ","");var t=isFinite(+o)?+o:0,i=isFinite(+r)?Math.abs(r):0,e=void 0===a?",":a,d=void 0===n?".":n,l="";return l=(i?function(o,r){var n=Math.pow(10,r);return""+Math.round(o*n)/n}(t,i):""+Math.round(t)).split("."),l[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,e)),(l[1]||"").length<i&&(l[1]=l[1]||"",l[1]+=new Array(i-l[1].length+1).join("0")),l.join(d)}Chart.defaults.global.defaultFontFamily="Nunito",Chart.defaults.global.defaultFontColor="#858796",o=document.getElementById("myAreaChart"),r=new Chart(o,{type:"line",data:{legend:{display:!0,labels:{fontColor:"rgb(255, 99, 132)"}},labels:[],datasets:[{label:"Total",lineTension:.3,backgroundColor:"rgba(231, 74, 59, 0.05)",borderColor:"rgba(231, 74, 59, 1)",pointRadius:3,pointBackgroundColor:"rgba(231, 74, 59, 1)",pointBorderColor:"rgba(231, 74, 59, 1)",pointHoverRadius:3,pointHoverBackgroundColor:"rgba(231, 74, 59, 1)",pointHoverBorderColor:"rgba(231, 74, 59, 1)",pointHitRadius:10,pointBorderWidth:2,data:[]},{label:"SABOR LIGERO",lineTension:.3,backgroundColor:"rgba(28, 200, 138, 0.05)",borderColor:"rgba(28, 200, 138, 1)",pointRadius:3,pointBackgroundColor:"rgba(28, 200, 138, 1)",pointBorderColor:"rgba(28, 200, 138, 1)",pointHoverRadius:3,pointHoverBackgroundColor:"rgba(28, 200, 138, 1)",pointHoverBorderColor:"rgba(28, 200, 138, 1)",pointHitRadius:10,pointBorderWidth:2,data:[]},{label:"SABOR ORIGINAL",lineTension:.3,backgroundColor:"rgba(54, 185, 204, 0.05)",borderColor:"rgba(54, 185, 204, 1)",pointRadius:3,pointBackgroundColor:"rgba(54, 185, 204, 1)",pointBorderColor:"rgba(54, 185, 204, 1)",pointHoverRadius:3,pointHoverBackgroundColor:"rgba(54, 185, 204, 1)",pointHoverBorderColor:"rgba(54, 185, 204, 1)",pointHitRadius:10,pointBorderWidth:2,data:[]},{label:"SIN AZÚCAR",lineTension:.3,backgroundColor:"rgba(78, 115, 223, 0.05)",borderColor:"rgba(78, 115, 223, 1)",pointRadius:3,pointBackgroundColor:"rgba(78, 115, 223, 1)",pointBorderColor:"rgba(78, 115, 223, 1)",pointHoverRadius:3,pointHoverBackgroundColor:"rgba(78, 115, 223, 1)",pointHoverBorderColor:"rgba(78, 115, 223, 1)",pointHitRadius:10,pointBorderWidth:2,data:[]}]},options:{maintainAspectRatio:!1,layout:{padding:{left:10,right:25,top:25,bottom:0}},scales:{xAxes:[{time:{unit:"hour"},gridLines:{display:!1,drawBorder:!1},ticks:{maxTicksLimit:7}}],yAxes:[{ticks:{maxTicksLimit:9,padding:10,callback:function(o,r,a){return n(o)}},gridLines:{color:"rgb(234, 236, 244)",zeroLineColor:"rgb(234, 236, 244)",drawBorder:!1,borderDash:[2],zeroLineBorderDash:[2]}}]},legend:{display:!0,position:"bottom"},tooltips:{backgroundColor:"rgb(255,255,255)",bodyFontColor:"#858796",titleMarginBottom:10,titleFontColor:"#6e707e",titleFontSize:14,borderColor:"#dddfeb",borderWidth:1,xPadding:15,yPadding:15,displayColors:!1,intersect:!1,mode:"index",caretPadding:10,callbacks:{label:function(o,r){return(r.datasets[o.datasetIndex].label||"")+":"+n(o.yLabel)}}}}})};return{init:function(){console.log("APP.weekChart"),t()},addData:n,addLabel:a}}();var APP=window.APP=window.APP||{};APP.cards=function(){var o=function(){console.log("APP.cards")},r=function(o){var r=o["sabor ligero"]+o["sabor original"]+o["sin azúcar"];n($("#card-total"),r),n($("#card-sabor-ligero"),(100*o["sabor ligero"]/r).toFixed(2)),n($("#card-sabor-original"),(100*o["sabor original"]/r).toFixed(2)),n($("#card-sin-azucar"),(100*o["sin azúcar"]/r).toFixed(2))},n=function(o,r){o.find(".entry-amount").html(r),o.find(".progress-bar").width(r+"%")};return{init:o,updateEntries:r}}();var APP=window.APP=window.APP||{};APP.index=function(){var o=function(){$.ajax({type:"GET",url:"assets/scripts/MOCK_DATA.json",dataType:"json",success:function(o,r){$("#fulldatatable").DataTable({data:o._1,columns:[{data:"name"},{data:"cokeFlavor"},{data:"phoneNumber",render:function(o,r,n){return o.substring(0,4)+"-"+o.substring(4)}},{data:"date",render:function(o,r,n){return new Date(o).toUTCString()}}]});var n,a={},t={},i={},e={},d={};o._1.forEach(function(o){o.cokeFlavor in a?a[o.cokeFlavor]++:a[o.cokeFlavor]=1,n=moment(o.date).format("YYYY/MM/DD/ HH"),n+=":00",n in t?t[n]++:t[n]=1,"sabor ligero"===o.cokeFlavor?i[n]=n in i?i[n]++:1:n in i||(i[n]=0),"sabor original"===o.cokeFlavor?n in e?e[n]++:e[n]=1:n in e||(e[n]=0),"sin azúcar"===o.cokeFlavor?n in d?d[n]++:d[n]=1:n in d||(d[n]=0)});for(var l in t)APP.weekChart.addLabel(l),APP.weekChart.addData(t[l],0);for(var l in i)APP.weekChart.addData(i[l],1);for(var l in e)APP.weekChart.addData(e[l],2);for(var l in d)APP.weekChart.addData(d[l],3);APP.cards.updateEntries(a)},error:function(o,r){alert(o.msg)}})};return{init:function(){console.log("APP.index"),o()}}}();var APP=window.APP=window.APP||{};APP.core={},APP.core.controller=function(){var o="",r=function(r){o=r},n=function(){return o},a=function(o){for(var r=[],n=document.getElementsByTagName("*"),a=0,t=n.length;a<t;a++)null!==n[a].getAttribute(o)&&r.push(n[a]);return r},t=function(o){var r=APP,a=n();""!==a&&r[a]&&"function"==typeof r[a].init&&r[a].init(o)};return{init:function(){for(var o=a("data-action"),n=0;n<o.length;n++){var i=o[n],e=i.getAttribute("data-action");r(e),console.log("APP.controller.init | APP."+e+".init() invoked"),t(i)}}}}(),function(){for(var o,r=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],a=n.length,t=window.console=window.console||{};a--;)o=n[a],t[o]||(t[o]=r)}();var APP=window.APP=window.APP||{};APP.global=function(){var o=function(){APP.index.init()},r=function(){APP.core.controller.init()};return{init:function(){o(),r()}}}(),document.addEventListener("DOMContentLoaded",function(){APP.global.init()});